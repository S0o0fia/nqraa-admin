
<div class="header">
  <h2>طلبات فحص العمل</h2>
  </div>
  
<section class="content">
  <div class="box">
      <div class="box box-info">
          <div class="box-header with-border">
            <h3 class="box-title">Line Chart</h3>
  
            <div class="box-tools pull-right">
              <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
              </button>
              <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
            </div>
          </div>
          <div class="box-body chart-responsive">
            <div class="chart" id="line-chart" style="height: 300px;"></div>
          </div>
          <!-- /.box-body -->
        </div>

  </div>
  <div class="box">
      <div class="box-header">
        <h3 class="box-title"> طلبات فحص العمل</h3>
        <!-- <a data-toggle="modal" data-target="#inspection-modal">
          <button class="btn btn-primary pull-right" id="btnAdd"> Add Request </button>
        </a> -->
        <a data-toggle="modal" data-target="#inspection-modal" id="btnAdd">
          <button class="btn  pull-right" id="btnAdd" > إضافة طلب </button>
        </a>
      </div>
      <!-- /.box-header -->
      <div class="box-body">
        <table id="rfiDataTable" class="table direction table-bordered table-striped">
          <thead>
          <tr>
            <th>رقم المشروع</th>
            <th>اسم المشروع</th>
            <th>رقم الطلب</th>
            <th>اسم الطلب</th>
            <th>عدد الطلبات</th>
            <th>تاريخ الفحص</th>
            <th>التحكم</th>
          </tr>
          </thead>
          <tbody>
              <tr *ngFor="let rfi of rfiList">
                <td>{{rfi.project_id}}</td>
                <td>{{rfi.project_name}}</td>
                <td>{{rfi.request_num}}</td>
                <td>{{rfi.request_name}}</td>
                <td>{{rfi.item_qty}}</td>
                <td>{{rfi.inspect_date}}</td>
                <td>
                  <div class=" row">
                    <a  data-toggle="tooltip" data-placement="top" title="التفاصيل">
                      <i class="glyphicon glyphicon-circle-arrow-left"></i>
                    </a>
                     &nbsp;&nbsp;
                    <a data-toggle="tooltip" data-placement="top" title="إزالة">
                      <i class="glyphicon glyphicon-trash"></i>
                    </a>
                  </div>
                    
                </td>
              </tr>
          </tbody>
          <!-- <tfoot>
          <tr>
            <th>Rendering engine</th>
            <th>Browser</th>
            <th>Platform(s)</th>
            <th>Engine version</th>
            <th>CSS grade</th>
          </tr>
          </tfoot> -->
        </table>
      </div>
      <!-- /.box-body -->
    </div>
</section>
<!-- /Main content -->
<div class="modal fade" id="inspection-modal">
<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      <h4 class="modal-title">إضافة طلب</h4>
    </div>
    <div class="modal-body">
      <form class="form-horizontal" [formGroup]="inspectionForm">
        <div class="form-group">
          <div class="col-sm-10">
            <input type="text" class="form-control order-md-2" id="orderNumber" placeholder="رقم الطلب"
              formControlName="orderNumber">
            <div *ngIf="!inspectionForm.controls.orderNumber.valid && isValid" class="text-danger">
              <div *ngIf="inspectionForm.get('orderNumber').errors.required">هذا الحفل مطلوب</div>
            </div>
          </div>
          <label for="orderNumber" class="col-sm-2 control-label order-md-1">رقم الطلب</label>
         
        </div>
        <div class="form-group">
          <div class="col-sm-10 selectWrapper">
            <!-- <select class="form-control select2" formControlName="requestType">
              <option value="" selected="selected" disabled>Please select a order type</option>
              <option>Alabama</option>
              <option>Alaska</option>
              <option>California</option>
              <option>Delaware</option>
              <option>Tennessee</option>
              <option>Texas</option>
              <option>Washington</option>
            </select> -->
            <select class="form-control select2 selectBox" formControlName="requestType">
              <option value=null selected="selected" disabled>اختر نوع الطلب</option>
              <option *ngFor="let itm of this.requestTypes" value= {{itm.id}}>
                {{itm.name}}
              </option>
            </select>
            <div *ngIf="!inspectionForm.controls.requestType.valid && isValid" class="text-danger">
              <div *ngIf="inspectionForm.get('requestType').errors.required">هذا الحقل مطلوب</div>
            </div>
          </div>
          <label class="col-sm-2 control-label">نوع الطلب</label>
          
        </div>
        <div class="form-group">
    
          <div class="col-sm-10">
            <!-- <input type="text" class="form-control order-md-2" id="orderNumber" placeholder=""> -->
            <input type="text" class="form-control order-md-2" id="orderNumber" placeholder="">
          </div>
          <label for="orderNumber" class="col-sm-2 control-label order-md-1">رقم الطلب</label>
        </div>
        <div class="form-group">
          <div class="col-sm-10 selectWrapper">
            <!-- <select class="form-control select2" formControlName="workSite">
              <option value="" selected="selected" disabled>Please select a work site</option>
              <option>Alabama</option>
              <option>Alaska</option>
              <option>California</option>
              <option>Delaware</option>
              <option>Tennessee</option>
              <option>Texas</option>
              <option>Washington</option>
            </select> -->
            <select class="form-control select2 selectBox" formControlName="workSite">
                <option value=null selected="selected" disabled>اختر اسم الموقع</option>
              <option *ngFor="let itm of workSites" value= {{itm.work_id}}>
                {{itm.work}}
              </option>
            </select>
            <div *ngIf="!inspectionForm.controls.workSite.valid && isValid" class="text-danger">
                <div *ngIf="inspectionForm.get('workSite').errors.required">هذا الحقل مطلوب</div>
            </div>
          </div>
          <label class="col-sm-2 control-label">اسم الموقع</label>
          
        </div>
        <div class="form-group">
          <div class="col-sm-10">
            <div class="input-group date">
              <div class="input-group-addon">
                <i class="fa fa-calendar"></i>
              </div>
              <!-- <input type="text" class="form-control pull-right" id="datepicker" formControlName="dateOfExamination"
                [(ngModel)]="dateOfExamination"> -->
               
                  <p-calendar [(ngModel)]="dateOfExamination" formControlName="dateOfExamination"
                  dateFormat="mm/dd/yy" [inputStyle]="{'width':'390px'}" 
                  hourFormat="24" readonly="true"></p-calendar>
               
            </div>
            <div *ngIf="!inspectionForm.controls.dateOfExamination.valid && isValid" class="text-danger">
                <div *ngIf="inspectionForm.get('dateOfExamination').errors.required">هذا الحقل مطلوب
              </div>
            </div>
          </div>
          <label class="col-sm-2 control-label">تاريخ الفحص</label>
          
        </div>
        <div class="form-group">
          <div class="col-sm-10 selectWrapper">
            <!-- <select class="form-control select2" formControlName="itemNumber">
              <option value="" selected="selected" disabled>Please select item number</option>
              <option>Alabama</option>
              <option>Alaska</option>
              <option>California</option>
              <option>Delaware</option>
              <option>Tennessee</option>
              <option>Texas</option>
              <option>Washington</option>
            </select> -->
            <select class="form-control select2 selectBox" formControlName="itemNumber" (change)="onSelectItem($event.target.value)">
                <option selected="selected" [value]=null disabled>اختر رقم العنصر</option>
              <option *ngFor="let itm of this.itemsList" value= {{itm.id}}>
                {{itm.item_number}}
              </option>
            </select>
            <div *ngIf="!inspectionForm.controls.itemNumber.valid && isValid" class="text-danger">
                <div *ngIf="inspectionForm.get('itemNumber').errors.required">هذا الحقل مطلوب</div>
            </div>
          </div>
          <label class="col-sm-2 control-label">رقم العنصر</label>
          
        </div>
        <!-- <div class="form-group">
          <div class="col-sm-10">
            <input type="text" class="form-control order-md-2" id="orderNumber" placeholder=""> -->
            <!-- <input type="text" class="form-control order-md-2" [ngModelOptions]="{standalone: true}" [(ngModel)]="selecteditemValue" placeholder="" readonly>
          </div>
          <label for="orderNumber" class="col-sm-2 control-label order-md-1">رقم العنصر</label>
          
        </div> -->
      </form>
    </div>
    <div class="modal-footer">
      <!-- <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button> -->
      <button type="button" class="btn btn-success" (click)="onAddInspectionClick()">Add to list</button>
      <br>
      <br>
      <h4 style="text-align:left">تم إضافة العنصر</h4>
      <br>
      <table id="inspection" class="table direction table-bordered table-striped">
        <thead>
          <tr>
              <th>رقم العنصر</th>
              <th>الكمية</th>
              <th>تحكم</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of addItems">
            <td>{{item.itemValue}}</td>
            <td>{{item.quanitity}}</td>
            <td>
                <div>
                    <!-- <button class="btn btn-primary"> -->
                      <i class="glyphicon glyphicon-pencil" aria-hidden="true" data-toggle="tooltip" title="Edit"></i>
                    <!-- </button> -->
                    &nbsp;&nbsp;
                  <!-- <button class="btn btn-danger"> -->
                    <i class="glyphicon glyphicon-trash" aria-hidden="true" data-toggle="tooltip" title="Delete" (click)="onDeleteItem(item)" ></i>
                  <!-- </button> -->
                </div>
            </td>

            <!-- <td colspan="3" style="text-align:center">No records found</td> -->
          </tr>
        </tbody>
      </table>
      <div *ngIf="this.addItems.length>0">
          <button type="button" class="btn btn-danger pull-right"  data-dismiss="modal">إغلاق</button>
          <button type="button" class="btn btn-success pull-left" (click)="onAddRequest()">إضافة</button>
      </div>
    </div>
  </div>
</div>
</div>